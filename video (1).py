import streamlit as st

# ===================== é¡µé¢åŸºç¡€é…ç½®ä¸æ ·å¼è®¾ç½® =====================
# é¡µé¢åŸºç¡€é…ç½®ï¼šä¿®æ”¹æ ‡é¢˜å’Œå›¾æ ‡æ›´è´´åˆç”œå¿ƒæ ¼æ ¼ä¸»é¢˜
st.set_page_config(page_title="ç”œå¿ƒæ ¼æ ¼æ”¾æ˜ å®¤", page_icon="ğŸ€", layout="wide")

# æ³¨å…¥CSSæ ·å¼ï¼Œå°†æŒ‰é’®è®¾ç½®ä¸ºç²‰è‰²ï¼ŒåŒæ—¶ä¼˜åŒ–ç®€ä»‹åŒºåŸŸçš„æ ·å¼
st.markdown("""
    <style>
    /* é’ˆå¯¹æ‰€æœ‰æŒ‰é’®çš„åŸºç¡€æ ·å¼ */
    div.stButton > button {
        background-color: #ffc0cb; /* æµ…ç²‰è‰² */
        color: black;
        border: none;
        border-radius: 5px;
    }
    /* æŒ‰é’®æ‚¬æµ®æ•ˆæœ */
    div.stButton > button:hover {
        background-color: #ff99cc; /* æ‚¬æµ®åŠ æ·±ç²‰è‰² */
    }
    /* ç®€ä»‹å’Œäººç‰©ä»‹ç»åŒºåŸŸçš„å®¹å™¨æ ·å¼ */
    .intro-container {
        background-color: #fdf2f8; /* æ·¡ç²‰è‰²èƒŒæ™¯ï¼Œè´´åˆä¸»é¢˜ */
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 20px;
    }
    </style>
    """, unsafe_allow_html=True)

# ===================== é¡µé¢æ ‡é¢˜ä¸ä¸»é¢˜å†…å®¹ =====================
st.title('ğŸ€ ç”œå¿ƒæ ¼æ ¼ç¬¬äº”éƒ¨')

# ---- æ·»åŠ ç”œå¿ƒæ ¼æ ¼ç®€ä»‹å’Œäººç‰©ä»‹ç» ----
# ä½¿ç”¨åˆ†æ å¸ƒå±€ï¼Œå°†ç®€ä»‹å’Œäººç‰©ä»‹ç»å¹¶åˆ—æ˜¾ç¤ºï¼ˆæ›´ç´§å‡‘ï¼‰
col1, col2 = st.columns(2)

with col1:
    # ç”œå¿ƒæ ¼æ ¼ä½œå“ç®€ä»‹
    st.markdown('<div class="intro-container">', unsafe_allow_html=True)
    st.subheader('ğŸ“– ä½œå“ç®€ä»‹')
    st.write("""
    ã€Šç”œå¿ƒæ ¼æ ¼ã€‹æ˜¯ä¸€éƒ¨ç»å…¸çš„å›½äº§åŸåˆ›3DåŠ¨ç”»ï¼Œä»¥å¤ä»£å®«å»·ä¸ºèƒŒæ™¯ï¼Œè®²è¿°äº†ç”œä¸ä¸æ ¼æ ¼ä¸èº«è¾¹å°ä¼™ä¼´ä»¬çš„æ¬¢ä¹æ—¥å¸¸ã€‚
    ç¬¬äº”éƒ¨å»¶ç»­äº†å‰ä½œè½»æ¾å¹½é»˜çš„é£æ ¼ï¼Œèå…¥äº†æ›´å¤šæˆé•¿ã€å‹è°Šä¸å‹‡æ°”çš„æ•…äº‹çº¿ï¼Œå±•ç°äº†æ ¼æ ¼ä»¬åœ¨å®«å»·ä¸­å‘ç”Ÿçš„ä¸€ç³»åˆ—æœ‰è¶£åˆæš–å¿ƒçš„æ•…äº‹ï¼Œ
    æ—¢ä¿ç•™äº†ä¼ ç»Ÿå›½é£å…ƒç´ ï¼Œåˆä¼ é€’äº†ç§¯æå‘ä¸Šçš„ä»·å€¼è§‚ã€‚
    """)
    st.markdown('</div>', unsafe_allow_html=True)

with col2:
    # ä¸»è¦äººç‰©ä»‹ç»
    st.markdown('<div class="intro-container">', unsafe_allow_html=True)
    st.subheader('ğŸ‘‘ ä¸»è¦äººç‰©')
    st.write("""
    - **ç”œä¸ä¸**ï¼šä¸»è§’ï¼Œæ€§æ ¼æ´»æ³¼å¼€æœ—ã€å¤©çœŸçƒ‚æ¼«ï¼Œå……æ»¡å¥½å¥‡å¿ƒï¼Œå¸¸å¸¸é—¹å‡ºå„ç§æœ‰è¶£çš„ç¬‘è¯ï¼Œä½†å¿ƒåœ°å–„è‰¯ã€ä¹äºåŠ©äººã€‚
    - **å¿ƒæŸ”æŸ”**ï¼šä¸ä¸çš„å¥½å‹ï¼Œå‡ºèº«ä¹¦é¦™é—¨ç¬¬ï¼Œèªæ˜ä¼¶ä¿ã€æ¸©æŸ”æ‡‚äº‹ï¼Œå¶å°”ä¼šæœ‰ç‚¹å°è¾ƒçœŸï¼Œæ˜¯ä¸ä¸çš„â€œå°å†›å¸ˆâ€ã€‚
    - **åä¼¦**ï¼šå¤–å›½å…¬çˆµçš„å„¿å­ï¼Œèªæ˜æœºæ™ºï¼Œæ“…é•¿å‘æ˜åˆ›é€ ï¼Œç»å¸¸ç”¨æ–°å¥‡çš„æƒ³æ³•å¸®åŠ©å°ä¼™ä¼´è§£å†³é—®é¢˜ã€‚
    - **æ­¦çŠ¶å…ƒ**ï¼šæ€§æ ¼æ†¨åšè€¿ç›´ï¼Œæ­¦åŠŸé«˜å¼ºï¼Œååˆ†è®²ä¹‰æ°”ï¼Œæ˜¯å°ä¼™ä¼´ä»¬çš„â€œä¿æŠ¤ç¥â€ã€‚
    """)
    st.markdown('</div>', unsafe_allow_html=True)

# ===================== è§†é¢‘æ•°æ®å®šä¹‰ =====================
# æ›¿æ¢ä¸ºStreamlitæ”¯æŒçš„è§†é¢‘æ ¼å¼ï¼ˆMP4/WebM/MOVç­‰ï¼‰
video_arr = [
    {
        'url': 'https://www.w3school.com.cn/example/html5/mov_bbb.mp4',  # ç¤ºä¾‹MP4é“¾æ¥
        'title': 'ç”œå¿ƒæ ¼æ ¼ç¬¬äº”éƒ¨-ç¬¬1é›†'
    },
    {
        'url': 'https://www.w3school.com.cn/example/html5/mov_bbb.mp4',
        'title': 'ç”œå¿ƒæ ¼æ ¼ç¬¬äº”éƒ¨-ç¬¬2é›†'
    },
    {
        'url': 'https://media.w3.org/2010/05/sintel/trailer.mp4',
        'title': 'ç”œå¿ƒæ ¼æ ¼ç¬¬äº”éƒ¨-ç¬¬3é›†'
    },
    {
        'url': 'https://www.w3school.com.cn/example/html5/mov_bbb.mp4',
        'title': 'ç”œå¿ƒæ ¼æ ¼ç¬¬äº”éƒ¨-ç¬¬4é›†'
    },
    {
        'url': 'https://media.w3.org/2010/05/sintel/trailer.mp4',
        'title': 'ç”œå¿ƒæ ¼æ ¼ç¬¬äº”éƒ¨-ç¬¬5é›†'
    }
]

# ===================== ä¼šè¯çŠ¶æ€åˆå§‹åŒ– =====================
# åˆå§‹åŒ–session_stateçš„ç´¢å¼•ï¼ˆç”¨äºè®°å½•å½“å‰æ’­æ”¾çš„é›†æ•°ï¼‰
if 'ind' not in st.session_state:
    st.session_state['ind'] = 0  # é»˜è®¤æ˜¾ç¤ºç¬¬1é›†

# ===================== è§†é¢‘æ’­æ”¾åŒºåŸŸ =====================
# æ˜¾ç¤ºå½“å‰é›†æ•°æ ‡é¢˜
st.subheader(video_arr[st.session_state['ind']]['title'])

# æ˜¾ç¤ºè§†é¢‘
st.video(video_arr[st.session_state['ind']]['url'], autoplay=True)

# ===================== é›†æ•°åˆ‡æ¢åŠŸèƒ½ =====================
# å®šä¹‰åˆ‡æ¢é›†æ•°çš„å‡½æ•°
def play(i):
    st.session_state['ind'] = int(i)

# æ¨ªå‘æ’åˆ—æŒ‰é’®ï¼ˆä¸€æ’æœ€å¤š5ä¸ªï¼‰
cols = st.columns(min(len(video_arr), 5))
for i, col in enumerate(cols):
    with col:
        st.button(f'ç¬¬{i + 1}é›†', use_container_width=True, on_click=play, args=(i,))
