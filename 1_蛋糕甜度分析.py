# å¯¼å…¥streamlitåº“ï¼Œç”¨äºå¿«é€Ÿæ­å»ºWebåº”ç”¨
import streamlit as st

st.markdown("""
    <style>
    /* å®šä½è¿›åº¦æ¡å…ƒç´ ï¼šstreamlité»˜è®¤è¿›åº¦æ¡çš„å±‚çº§é€‰æ‹©å™¨ */
    .stProgress > div > div > div > div {
        background-color: #ff85a2; /* ç²‰è‰²è‰²å€¼ï¼ˆå¯æŒ‰éœ€ä¿®æ”¹ï¼‰ */
    }
    /* ä¼˜åŒ–metricç»„ä»¶æ ·å¼ï¼Œå¢å¼ºè§†è§‰åŒºåˆ† */
    .stMetric {
        background-color: #f8f9fa;
        padding: 1rem;
        border-radius: 0.5rem;
    }
    </style>
""", unsafe_allow_html=True)

# é¡µé¢åŸºç¡€é…ç½®
st.set_page_config(
    page_title="è›‹ç³•ç”œåº¦æ¡£æ¡ˆ",  # æµè§ˆå™¨æ ‡ç­¾é¡µæ ‡é¢˜
    page_icon="ğŸ°",  # æµè§ˆå™¨æ ‡ç­¾é¡µå›¾æ ‡ï¼ˆè›‹ç³•emojiï¼‰
    layout="wide"  # é¡µé¢å¸ƒå±€ï¼šå®½å±æ¨¡å¼ï¼ˆé€‚é…æ›´å¤šå†…å®¹ï¼‰
)

# è›‹ç³•åŸºç¡€ä¿¡æ¯å­—å…¸ï¼šå­˜å‚¨è›‹ç³•æ ¸å¿ƒå±æ€§ï¼Œé”®å€¼å¯¹ç»“æ„ä¾¿äºè°ƒç”¨
cake_info = {
    "è›‹ç³•åç§°": "äº‘æœµè›‹ç³•",  # è›‹ç³•å…·ä½“åç§°
    "æ¡£æ¡ˆID": "CAKE2025001",  # å”¯ä¸€æ ‡è¯†IDï¼ˆæŒ‰å¹´ä»½+åºå·å‘½åï¼‰
    "åˆ¶ä½œæ—¥æœŸ": "2025-06-10",  # è›‹ç³•åˆ¶ä½œæ—¶é—´
    "ç”œåº¦çŠ¶æ€": "é€‚ä¸­",  # ç”œåº¦å½“å‰çŠ¶æ€ï¼ˆé€‚ä¸­/è¿‡ç”œ/åæ·¡ï¼‰
    "æ‰€å±ç³»åˆ—": "ä½ç³–ç³»åˆ—",  # è›‹ç³•åˆ†ç±»ç³»åˆ—
    "çƒ˜ç„™å¸ˆ": "æå¸ˆå‚…",  # åˆ¶ä½œäººå‘˜
    "è›‹ç³•é‡é‡": 500,  # æ–°å¢ï¼šè›‹ç³•é‡é‡ï¼ˆgï¼‰ï¼Œç”¨äºmetricè®¡ç®—
    "ç›®æ ‡ç”œåº¦": 80  # æ–°å¢ï¼šç›®æ ‡ç”œåº¦è¯„åˆ†ï¼Œç”¨äºmetricå¯¹æ¯”
}

# ç”œåº¦æ ¸å¿ƒæŒ‡æ ‡åˆ—è¡¨ï¼šæ¯ä¸ªå…ƒç´ æ˜¯å…ƒç»„ï¼ˆæŒ‡æ ‡åç§°, å½“å‰å€¼, è°ƒæ•´å¹…åº¦ï¼‰
sweetness_metrics = [
    ("è”—ç³–å«é‡", 65, -5),  # è”—ç³–å æ¯”65%ï¼Œè¾ƒä¹‹å‰é™ä½5%
    ("æœç³–å æ¯”", 40, +2),  # æœç³–å æ¯”40%ï¼Œè¾ƒä¹‹å‰æå‡2%
    ("æ•´ä½“ç”œåº¦è¯„åˆ†", 78, 0),  # ç»¼åˆç”œåº¦78åˆ†ï¼Œæ— è°ƒæ•´
]

# ç”œåº¦è°ƒæ•´ä»»åŠ¡åˆ—è¡¨ï¼šå­˜å‚¨éœ€è¦æ‰§è¡Œçš„ç”œåº¦ä¼˜åŒ–ä»»åŠ¡
sweetness_tasks = [
    ("é™ä½è”—ç³–ç”¨é‡", "2025-06-08", "å·²å®Œæˆ", "ç®€å•"),  # ä»»åŠ¡1ï¼šé™è”—ç³–ï¼ˆå·²å®Œæˆï¼Œéš¾åº¦ç®€å•ï¼‰
    ("å¢åŠ å¤©ç„¶æœç³–", "2025-06-09", "è¿›è¡Œä¸­", "ä¸­ç­‰"),  # ä»»åŠ¡2ï¼šåŠ æœç³–ï¼ˆè¿›è¡Œä¸­ï¼Œéš¾åº¦ä¸­ç­‰ï¼‰
    ("å£æ„Ÿç”œåº¦æ ¡å‡†", "2025-06-11", "æœªå®Œæˆ", "å›°éš¾")   # ä»»åŠ¡3ï¼šæ ¡å‡†å£æ„Ÿï¼ˆæœªå®Œæˆï¼Œéš¾åº¦å›°éš¾ï¼‰
]

# ç”œåº¦è®¡ç®—æ ¸å¿ƒä»£ç å­—ç¬¦ä¸²ï¼šå­˜å‚¨Pythonå‡½æ•°
sweetness_code = '''def calculate_sweetness(sugar, fructose, weight):
    """è®¡ç®—è›‹ç³•æ•´ä½“ç”œåº¦è¯„åˆ†ï¼ˆ0-100åˆ†ï¼‰"""
    # ç”œåº¦ç³»æ•°ï¼šè”—ç³–1.0ï¼ˆåŸºå‡†ï¼‰ï¼Œæœç³–1.2ï¼ˆæ›´ç”œï¼‰
    total_sweet = (sugar * 1.0) + (fructose * 1.2)
    # æŒ‰è›‹ç³•é‡é‡å½’ä¸€åŒ–ï¼ˆä»¥500gä¸ºåŸºå‡†ï¼Œé¿å…é‡é‡å½±å“ç”œåº¦åˆ¤æ–­ï¼‰
    sweetness_score = (total_sweet / weight) * 100
    # è¿”å›å››èˆäº”å…¥åˆ°1ä½å°æ•°çš„è¯„åˆ†ï¼ˆç»“æœæ›´ç®€æ´ï¼‰
    return round(sweetness_score, 1)

# ç¤ºä¾‹è°ƒç”¨
current_score = calculate_sweetness(sugar=65, fructose=40, weight=500)
print(f"å½“å‰è›‹ç³•ç”œåº¦è¯„åˆ†ï¼š{current_score}åˆ†")
'''

# Titleï¼ˆä¸€çº§æ ‡é¢˜ï¼‰
st.title(f"ğŸ° {cake_info['è›‹ç³•åç§°']} ç”œåº¦æ¡£æ¡ˆç³»ç»Ÿ")

# Headerï¼ˆäºŒçº§æ ‡é¢˜ï¼Œæ›¿ä»£åŸsubheaderï¼Œæ›´ç¬¦åˆå±‚çº§è§„èŒƒï¼‰
st.header("ğŸ“ åŸºç¡€æ¡£æ¡ˆä¿¡æ¯")

# Markdownï¼ˆå¯Œæ–‡æœ¬ï¼‰ï¼šè¡¥å……æ¡£æ¡ˆè¯´æ˜
st.markdown("""
è¯¥æ¡£æ¡ˆè®°å½•äº†ä½ç³–ç³»åˆ—è›‹ç³•çš„ç”œåº¦æ ¸å¿ƒæ•°æ®ï¼ŒåŒ…å«**åŸºç¡€ä¿¡æ¯ã€ç”œåº¦æŒ‡æ ‡ã€è°ƒæ•´ä»»åŠ¡**ç­‰æ¨¡å—ï¼Œ
æ‰€æœ‰æ•°æ®å‡åŸºäºæ ‡å‡†åŒ–çƒ˜ç„™æµç¨‹é‡‡é›†ï¼Œå¯ä½œä¸ºç”œåº¦ä¼˜åŒ–çš„æ ¸å¿ƒå‚è€ƒä¾æ®ã€‚
""")

# åˆ†4åˆ—å±•ç¤ºåŸºç¡€ä¿¡æ¯ï¼Œç»“åˆtextï¼ˆst.writeï¼‰ä½¿ç”¨
col1, col2, col3, col4 = st.columns(4)
with col1:
    st.write(f"**æ¡£æ¡ˆID**ï¼š{cake_info['æ¡£æ¡ˆID']}")  # Textï¼ˆåŸºç¡€æ–‡æœ¬ï¼‰
with col2:
    st.write(f"**åˆ¶ä½œæ—¥æœŸ**ï¼š{cake_info['åˆ¶ä½œæ—¥æœŸ']}")
with col3:
    st.write(f"**ç”œåº¦çŠ¶æ€**ï¼š{cake_info['ç”œåº¦çŠ¶æ€']}")
with col4:
    st.write(f"**çƒ˜ç„™å¸ˆ**ï¼š{cake_info['çƒ˜ç„™å¸ˆ']}")

# Headerï¼šç”œåº¦æ ¸å¿ƒæŒ‡æ ‡
st.header("ğŸ¬ ç”œåº¦æ ¸å¿ƒæŒ‡æ ‡")

# Metricç»„ä»¶ï¼ˆå…³é”®ï¼šå±•ç¤ºæ ¸å¿ƒæ•°å€¼+å¯¹æ¯”ï¼‰
metric_col1, metric_col2, metric_col3 = st.columns(3)
with metric_col1:
    st.metric(
        label="å½“å‰ç”œåº¦è¯„åˆ†",
        value=f"{sweetness_metrics[2][1]}åˆ†",
        delta=f"{sweetness_metrics[2][1] - cake_info['ç›®æ ‡ç”œåº¦']}åˆ†",
        delta_color="inverse"
    )
with metric_col2:
    st.metric(
        label="è›‹ç³•é‡é‡",
        value=f"{cake_info['è›‹ç³•é‡é‡']}g",
        delta="0g",
        help="ä»¥500gä¸ºåŸºå‡†é‡é‡ï¼Œç”¨äºç”œåº¦å½’ä¸€åŒ–è®¡ç®—"
    )
with metric_col3:
    st.metric(
        label="ç›®æ ‡ç”œåº¦è¯„åˆ†",
        value=f"{cake_info['ç›®æ ‡ç”œåº¦']}åˆ†",
        delta="å‚è€ƒå€¼",
    )

# è¯¦ç»†ç”œåº¦æŒ‡æ ‡å±•ç¤ºï¼ˆç»“åˆprogresså’Œtextï¼‰
st.subheader("è¯¦ç»†ç”œåº¦å æ¯”")
for name, value, adjust in sweetness_metrics:
    col1, col2, col3 = st.columns([1, 3, 1])
    with col1:
        st.write(f"**{name}**")  # Text
    with col2:
        st.progress(value/100, text=f"{value}%")  # Progress
    with col3:
        if adjust < 0:
            st.success(f"{adjust}%")  # Textï¼ˆå¸¦çŠ¶æ€è‰²ï¼‰
        elif adjust > 0:
            st.warning(f"+{adjust}%")
        else:
            st.info(f"{adjust}%")

# Headerï¼šç”œåº¦è°ƒæ•´ä»»åŠ¡
st.header("ğŸ“‹ ç”œåº¦è°ƒæ•´ä»»åŠ¡æ¸…å•")

# Tableç»„ä»¶ï¼ˆæ ¸å¿ƒï¼šç»“æ„åŒ–å±•ç¤ºæ•°æ®ï¼‰
st.table([["ä»»åŠ¡åç§°", "å¼€å§‹æ—¥æœŸ", "çŠ¶æ€", "éš¾åº¦"]] + sweetness_tasks)

# Headerï¼šæ ¸å¿ƒè®¡ç®—é€»è¾‘
st.header("ğŸ’» ç”œåº¦è®¡ç®—æ ¸å¿ƒä»£ç ")

# Codeç»„ä»¶ï¼ˆè¯­æ³•é«˜äº®+è¡Œå·ï¼‰
st.code(sweetness_code, language="python", line_numbers=True)

# é¡µè„šï¼ˆMarkdown+Textï¼‰
st.divider()
st.markdown("""
> **ç‰ˆæƒä¿¡æ¯** Â© 2025 çƒ˜ç„™ç ”å‘éƒ¨  
> **æ•°æ®æ›´æ–°æ—¶é—´**ï¼š2025-06-10  
> **ç³»ç»Ÿè¯´æ˜**ï¼šæœ¬ç³»ç»ŸåŸºäºStreamlitæ„å»ºï¼Œæ‰€æœ‰ç”œåº¦æŒ‡æ ‡å‡ä¸ºå®æµ‹æ•°æ®
""")

